<!doctype html>
<html>
<head>
<script src="math.js"></script>
<script src="battle.js"></script>
<script>

var canvas, context, interval, game;

var Game = function() {
    this.battle = new Battle();
};

Game.prototype.loop = function() {
    this.draw();
};

Game.prototype.mouse_down = function(e) {
    this.battle.mouse_down(e.clientX, e.clientY);
};

Game.prototype.draw = function() {
    context.fillStyle = "rgb(100,100,100)";
    context.fillRect(0, 0, canvas.width, canvas.height);
    
    this.battle.draw(context);
};

window.onload = function() {
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");
    
    game = new Game();
    canvas.onmousedown = function(e) { game.mouse_down(e); };
    window.setInterval(function() { game.loop() }, 1000/30);
};
</script>
</head>
<body>
<canvas id="canvas" width="640" height="480"></canvas>
</body>
</html>
